{"hash":"ce1fc9af2e1541bc4b667c73bfd42ba1","data":{"html":"<span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">import</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> { definePlugin } </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">from</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\"> '@ldesign/doc'</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">import</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> type</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> { </span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  LDocPlugin, </span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  UserConfig, </span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  SiteConfig, </span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  PageData,</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  ClientPluginContext </span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">} </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">from</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\"> '@ldesign/doc'</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">export</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> interface</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> MyPluginOptions</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {</span></span><span class=\"line\"><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">  enabled</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">?:</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> boolean</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">}</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">export</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> function</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> myPlugin</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">options</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">:</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> MyPluginOptions</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {})</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">:</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> LDocPlugin</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">  const</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> { </span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">enabled</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> true</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> } </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">=</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> options</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">  if</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> (</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">!</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">enabled) {</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">    return</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> definePlugin</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">({ name: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'my-plugin-disabled'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> })</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  }</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">  return</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> definePlugin</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">({</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    name: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'my-plugin'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">,</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    enforce: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'pre'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">,  </span><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">// 'pre' | 'post' | number</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== 配置阶段 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    config</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">config</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">, </span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">env</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 修改用户配置</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">      return</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">        ...</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">config,</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">        // 你的修改</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    configResolved</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">config</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 配置解析完成，可以访问最终配置</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== Vite 扩展 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    vitePlugins</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">() {</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">      return</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> [</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">        // 返回额外的 Vite 插件</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      ]</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== Markdown 扩展 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    extendMarkdown</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">md</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 扩展 markdown-it 实例</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      md.</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">use</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(someMarkdownPlugin)</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== 数据扩展 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    extendPageData</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">pageData</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">, </span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">ctx</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 扩展页面数据</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      pageData.frontmatter.customField </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">=</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\"> 'value'</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    extendSiteData</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">siteData</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 扩展站点数据</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== 路由扩展 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    extendRoutes</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">routes</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 修改或添加路由</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      routes.</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">push</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">({</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        path: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'/custom'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">,</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        component: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'/path/to/component.vue'</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      })</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">      return</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> routes</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    onBeforeRouteChange</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">to</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">, </span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">from</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 路由切换前（客户端）</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 返回 false 可阻止导航</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    onAfterRouteChange</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">to</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 路由切换后（客户端）</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== 构建生命周期 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    buildStart</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">config</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 构建开始</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    onBeforePageRender</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">page</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 页面渲染前</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    onAfterPageRender</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">page</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 页面渲染后，可访问 page.html</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    generateBundle</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">config</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 所有页面生成后</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    buildEnd</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">config</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 构建完成</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== 客户端生命周期 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    onClientInit</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">ctx</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // Vue 应用初始化</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    onClientMounted</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">ctx</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // Vue 应用挂载完成</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    onClientUpdated</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">ctx</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 页面更新后</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== UI 注入 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    slots: {</span></span><span class=\"line\"><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">      'doc-after'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">: {</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        component: MyComponent,</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        props: { </span><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">/* ... */</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> },</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        order: </span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">100</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // 或使用函数形式（可访问上下文）</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // slots: (ctx) => ({</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    //   'doc-after': { ... }</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // }),</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    globalComponents: [</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      {</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        name: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'MyGlobalComponent'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">,</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        component: MyGlobalComponent</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    ],</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    globalDirectives: [</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      {</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        name: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'my-directive'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">,</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        directive: myDirective</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    ],</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== 代码注入 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    headScripts: [</span></span><span class=\"line\"><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">      `console.log('Hello from plugin')`</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    ],</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    headStyles: [</span></span><span class=\"line\"><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">      `.my-class { color: red; }`</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    ],</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== 热更新 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    handleHotUpdate</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">ctx</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 处理热更新</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">    // ============== 清理 ==============</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    onDestroy</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">() {</span></span><span class=\"line\"><span style=\"--shiki-light:#6A737D;--shiki-dark:#6A737D\">      // 插件销毁时的清理工作</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  })</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">}</span></span><span class=\"line\"></span>","lang":"ts"},"createdAt":1767144921629,"version":"1.0.0"}