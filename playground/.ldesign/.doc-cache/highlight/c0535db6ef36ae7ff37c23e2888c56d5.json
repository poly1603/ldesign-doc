{"hash":"1c5481e6535594a7c571ab37a6201adc","data":{"html":"<span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">import</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> { definePlugin } </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">from</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\"> '@ldesign/doc'</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">import</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> { defineComponent, h, computed } </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">from</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\"> 'vue'</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">import</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> type</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> { LDocPlugin, PageData, PluginPageContext } </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">from</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\"> '@ldesign/doc'</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">export</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> interface</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> ReadingTimeOptions</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {</span></span><span class=\"line\"><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">  wordsPerMinute</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">?:</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> number</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">}</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">const</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> ReadingTime</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> defineComponent</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">({</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  props: {</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    minutes: Number,</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    words: Number</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  },</span></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">  setup</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">props</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">    const</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> text</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> computed</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(() </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">=></span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> </span></span><span class=\"line\"><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">      `ðŸ“– ${</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">props</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">.</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">words</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">} å­— Â· çº¦ ${</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">props</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">.</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">minutes</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">} åˆ†é’Ÿ`</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    )</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    </span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">    return</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> () </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">=></span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> h</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'div'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">, { </span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      class: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'reading-time'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">,</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      style: { color: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'var(--ldoc-c-text-3)'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    }, text.value)</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">})</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">export</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> function</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> readingTimePlugin</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">options</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">:</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> ReadingTimeOptions</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {})</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">:</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> LDocPlugin</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">  const</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> { </span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">wordsPerMinute</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> 200</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> } </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">=</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> options</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">  return</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> definePlugin</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">({</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    name: </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">'ldoc:reading-time'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">,</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    extendPageData</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">pageData</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">:</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> PageData</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">, </span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">ctx</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">:</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\"> PluginPageContext</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) {</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">      const</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> text</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> ctx.content.</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">replace</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">/</span><span style=\"--shiki-light:#032F62;--shiki-dark:#DBEDFF\">&#x3C;</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">[</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">^</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">>]</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">*</span><span style=\"--shiki-light:#032F62;--shiki-dark:#DBEDFF\">></span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">/</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">g</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">, </span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">''</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">)</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">      const</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> words</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> (text.</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">match</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">/</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">[\\u4e00-\\u9fa5]</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">/</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">g</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">||</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> []).</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">length</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> +</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">                    (text.</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">match</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">/</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">[a-zA-Z]</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">+</span><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">/</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">g</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">||</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> []).</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">length</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">      const</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> minutes</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> Math.</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">max</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\">1</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">, Math.</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">ceil</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">(words </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">/</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> wordsPerMinute))</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      </span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      pageData.frontmatter.readingTime </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">=</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> { minutes, words }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    },</span></span><span class=\"line\"></span><span class=\"line\"><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">    slots</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">: (</span><span style=\"--shiki-light:#E36209;--shiki-dark:#FFAB70\">ctx</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">) </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">=></span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">      const</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> rt</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\"> =</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> ctx.data.</span><span style=\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\">getFrontmatter</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">().readingTime </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">as</span><span style=\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\"> any</span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">      if</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> (</span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">!</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">rt) </span><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">return</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {}</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      </span></span><span class=\"line\"><span style=\"--shiki-light:#D73A49;--shiki-dark:#F97583\">      return</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\"> {</span></span><span class=\"line\"><span style=\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\">        'doc-top'</span><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">: {</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">          component: ReadingTime,</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">          props: { minutes: rt.minutes, words: rt.words }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">        }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">      }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">    }</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">  })</span></span><span class=\"line\"><span style=\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\">}</span></span><span class=\"line\"></span>","lang":"ts"},"createdAt":1767144921804,"version":"1.0.0"}